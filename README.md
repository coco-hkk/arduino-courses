# Arduino 实训目标

实现局部气象检测系统的部分功能。具体点，利用各种传感器采集气象相关数据，然后通过
程序分析将检测结果显示并进行预警，将检测结果实时发送到网络，使用终端进行查看。

学习内容分为三部分：显示、通知或警告类型元器件及程序学习；数据采集传感器类型元器
件及程序学习；网络相关操作及程序学习。

1. 掌握使用串口输出数据和日志。
2. 掌握利用程序控制（读写）硬件接口、管脚。
3. 掌握利用 Arduino IDE 查找、安装和使用库文件。学会三种安装库文件方法。
4. 了解如何从零构建一个项目过程。
5. 学会查阅硬件和库的使用手册，知道如何从零上手一个陌生的硬件和软件库的流程。
6. 了解调试。学会查看错误日志，即查看Arduino IDE控制台（下面黑色输出窗口）消息。
7. 了解硬件和硬件、硬件和软件的数据传输、通讯。
8. 了解两个设备间通过串口通信的方法。

# 实验环境

- WIN10 64 位 家庭版
- Arduino IDE arduino-1.8.15（从[这里](https://www.arduino.cc/en/software) 获取）
- Arduino UNO
- DS1302 [库文件](http://osoyoo.com/2016/07/26/ds1302_clock_module/)

# 实验强调

1. 一定要注意不要损毁元器件。
2. 实验结果不符合预期，首先检查电路是否正确，代码是否和硬件电路匹配，元器件是否
   有问题。元器件包括不限于：跳线、面包板、各种传感器和实验目标等。
3. 搭建电路前先想一想怎么才能简洁美观，有利于后期调试。

# 实验基础知识

1. C 语言基础知识。涉及数组及二维数组。
2. 二进制和十六进制之间的转换。
3. 位操作。
4. 结构体。

# 实验内容

1. 搭建开发环境。
2. 串口实验。实现串口输入、输出。
3. LED 控制实验。实现跑马灯、交通信号灯模拟。
4. 电位器实验。获取电位器输出模拟值、电位器控制 LED。
5. 数码管实验。实现单位数码管显示数字、秒表功能，4 段数码管实现计数器。
6. LCD 屏实验。实现显示英文并左右或循环移动内容。
7. 按键模块实验。实现按键控制 LED 行为，实现抢答器。
8. 蜂鸣器实验。播放音乐。
9. 键盘实验。
10. 光敏电阻实验。
11. RGB 三基色 LED 实验。
12. 舵机实验。点击旋转 180 度，电位器控制舵机转动。
13. DS1302 时钟实验。显示日期和时间。
14. 红外遥控实验。控制 LED 灯。
15. 超声波测距实验。控制 LED 灯。
16. 声控实验。控制 LED 灯。
17. DHT11温湿度传感器实验。
18. 步进电机实验。通过电位器控制步进电机转动。
19. NodeMCU/ESP8266 本地数据发布。MCU 创建服务器并给客户端发送传感器数据。
20. NodeMCU/ESP8266 本地传感器控制。利用客户端控制 MCU 外围设备、传感器。
21. 通过 MQTT 客户端完成与 IOT 的互联。

# 实验问题

电路出问题后，调试一定要有耐心。先观察是不是电路连接有误，其次确定元器件是否损坏
。

- 设备管理器中找不到 Arduino 的端口号
  1. 确保 Arduino 和电脑通过 USB 连接。
  2. 确保 Arduino 设备驱动正确安装。
  3. 重启电脑。

- 串口输出乱码
  1. 确保串口输出工具和代码中波特率设置一致。比如 115200.

- 无法上传 / 烧录
  1. 确保串口工具没有占用 COM 端口
  2. 确保选择了正确的 COM 端口
  3. 重新插拔 Arduino 设备
  4. 重启 Arduino IDE

- 缺少库文件，一般会报错：找不到 xxxx.h 头文件。
    1. 在 Arduino IDE 菜单栏中找到 `项目 ->加载库 ->管理库`，在这里面搜索需要的库
       ，然后安装即可。
    2. 可以在网上找库文件，然后通过 `项目 ->加载库 ->添加.zip 库`，将自己找的库文件
       加载到项目中。
    3. 可以自己手动解压，然后把解压后的目录（文件夹）放在 `项目文件夹位置` 目录
       下的 `libraries` 目录中。
    - 在 `项目 ->加载库` 即可找到是否加载已安装的库模块（需要重启 IDE 才可以看到）。

- 代码一定要使用英文（注释除外），确保空格、换行是由英文半角状态输出。

- 电路没问题步进电机没法正常转动。
    1. 换一下导线，或换一下面包板上的位置。
    2. 使用 5V 电压，而不是 3V。

- LED 灯不亮
    1. 保证 LED 是正常未损毁的。
    2. 保证电路没问题，导线没有接错。
    3. 也可能是和 LED 串联的电阻阻值过大导致。

- 红外遥控实验可能会提示所用函数被抛弃，导致不能正常编译，或串口不能正常显示。
    1. 删除 libraries 目录中的 IRremote 库。
    2. 重新安装 IRremote 模块。

- 上传代码时，esptool 超时问题
    1. 可能是数据线问题，换一下试试。
    2. 可能是端口问题，换一下端口。
    3. 重新安装驱动。
